{% extends "admin/base_site.html" %}

{% block title %}
    Employee Attendance
{% endblock %}

{% block content %}

{% load humanize %}
{% load static %}

<link 
    rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" 
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous"
/>
<link rel="stylesheet" href="{% static 'css/list.css' %}">

<style>
    .table__row:nth-child(odd) {
        background: #f8f8f8;
    }
    .table__row:nth-child(even) {
        background: white;
    }
    td, th {
        white-space: nowrap;
    }
</style>

<div class="container">
    <h2 class="h2 text-center py-3">Employee Attendance</h2>
    <div class="d-flex justify-content-end pb-3">
        <a class="btn btn-secondary text-white px-3" href="{% url 'admin:employee_attendance' %}admin/">Old View</a>
    </div>
    <div class="table-responsive">
        <table class="table w-100 table-bordered">
            <thead>
                <tr class="table__row">
                    <th scope="col" rowspan="2" class="align-middle text-dark border" style="width: 16%;">Employee</th>
                </tr>
                <tr class="table__row">
                    {% for date in dates %}
                        <th class="border text-dark text-center">
                            {{ date|date:"M d" }}
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for employee, date_data in date_datas.items %}
                <tr class="table__row">
                    <td class="align-middle">{{ employee.full_name }}</td>
                    {% for date, data in date_data.items %}
                        {% if data %}
                            <td>
                                <p>Entry: {{ data.entry_time }}</p>
                                <p>Exit : {{ data.exit_time }}</p>
                            </td>
                        {% else %}
                            <td class="align-middle"> - </td>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
                </tr>
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
